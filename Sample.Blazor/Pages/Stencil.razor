@page "/stencil"
@using System.Text.Json

<h3>Stencil Component</h3>
<table class="table">
    <thead>
        <tr>
            <th>Field</th>
            <th>Value</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>navListJson</td>
            <td>@navListJson</td>
        </tr>
        <tr>
            <td>navList</td>
            <td>@navList</td>
        </tr>
    </tbody>
</table>
<table class="table">
    <thead>
        <tr>
            <th>Title</th>
            <th>Icon</th>
            <th>Url</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in navList)
        {
            <tr>
                <td>@item.Title</td>
                <td>@item.Icon</td>
                <td>@item.Url</td>
            </tr>
        }

    </tbody>
</table>

<custom-elements-table items=@navListJson></custom-elements-table>

@code {
    private string navListJson;
    private List<NavItem> navList;

    protected override void OnInitialized()
    {
        navList = new List<NavItem>
    {
            new NavItem {Title = "Home", Icon = "fa fa-cog", Url = "/" },
            new NavItem {Title = "Somplace Else", Icon = "fa fa-bang", Url = "/elsewhere" }
        };

        var options = new JsonSerializerOptions
        {
            PropertyNamingPolicy = JsonNamingPolicy.CamelCase,
            WriteIndented = true,
        };

        navListJson = JsonSerializer.Serialize(navList, options);
    }
    
    public class NavItem
    {
        public string Title { get; set; }
        public string Icon { get; set; }
        public string Url { get; set; }
    }
}
